{% extends "base.html" %}

{% block title %}Vacathon | Discover Your Next Run{% endblock %}

{% block content %}
<section class="hero">
    <div class="hero-text">
        <h1>Run the world with Vacathon</h1>
        <p>Discover, plan, and conquer unforgettable marathon adventures across breathtaking destinations.</p>
        <div class="hero-actions">
            {% url 'events:list' as events_url %}
            <a class="btn primary" href="{{ events_url|default:'#' }}">Browse Events</a>
            {% if user.is_authenticated and user.is_staff %}
        {% url 'profiles:admin-event-add' as add_event_url %}
        <a href="{{ add_event_url|default:'#' }}" class="btn secondary" id="host-event-button">Host an Event</a>
    {% endif %}
        </div>
    </div>
</section>



<section class="stats">
    {% for label, value in stats.items %}
    <div class="stat-card">
        <p class="value">{{ value }}</p>
        <p class="label">{{ label|capfirst }}</p>
    </div>
    {% endfor %}
</section>

<section class="featured-events">
    <header>
        <h2>Featured Events</h2>
        <a class="link" href="{{ events_url|default:'#' }}">See all events</a>
    </header>
    <div class="cards">
        {% for event in featured_events %}
        <article class="event-card">
            <h3>{{ event.title }}</h3>
            {% if event.start_date %}
            <p class="meta">
                {{ event.city }}{% if event.country %}, {{ event.country }}{% endif %}
                &middot; {{ event.start_date|date:"M j, Y" }}
                {% with categories=event.categories.all %}
                    {% if categories %}
                        &middot;
                        {% for category in categories %}
                            {{ category.display_name }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    {% endif %}
                {% endwith %}
            </p>
            {% else %}
            <p class="meta">
                {{ event.location|default:event.city }}
                {% if event.date %}&middot; {{ event.date }}{% endif %}
            </p>
            {% endif %}
            {% with detail_url=event.get_absolute_url %}
            {% if detail_url %}
            <a class="btn outline" href="{{ detail_url }}">View details</a>
            {% else %}
            <a class="btn outline" href="{{ events_url|default:'#' }}{% if events_url %}?highlight={{ event.title|urlencode }}{% endif %}">View details</a>
            {% endif %}
            {% endwith %}
        </article>
        {% endfor %}
    </div>
</section>

<section class="cta">
    <div class="cta-box">
        <h2>Ready to share your marathon journey?</h2>
        <p>Join the Vacathon community forum to connect with runners, swap travel tips, and stay updated with the latest events.</p>
        {% url 'forum:index' as forum_url %}
        <a class="btn primary" href="{{ forum_url|default:'#' }}">Join the Forum</a>
    </div>
</section>
{% endblock %}